{% extends "base.html" %}

{% block body_class %}page--{{ page.category.slug }}{% endblock %}

{% block content %}

    <div class="wrapper wrapper--padding-top">
        <h1 class="collections-title">
            {{ page.title }}
        </h1>
    </div>

    <div class="wrapper wrapper--collections">
        <ul class="collections-nav js-collections-nav">
            {% for collection in page.special_collections.all %}
                {% include 'categories/collections-nav-item.html'%}
            {% endfor %}
        </ul>

        <ul class="collections-list">
            {% for collection in page.special_collections.all %}
                {% include 'categories/special-collection.html'%}
            {% endfor %}
        </ul>
    </div>

{% endblock %}

{% block extra_js %}
<script>
(function() {
    // fix long menus bleeding under the footer as you scroll down
    let num_menu_items = $('.collections-nav-item').length
    if (num_menu_items) {
        // menu items are 49px high & 4 fit, the rest overflow
        let margin = (num_menu_items - 4) * 49
        if (margin > 0) $('.collections-list').css('margin-bottom', margin + 'px')
    }
})()
</script>
{% endblock %}
