{% extends "base.html" %}
{% load wagtailcore_tags wagtailimages_tags %}

{% block body_class %}page--{{ page.category.slug }}{% endblock %}

{# we basically reuse the blog_post template & retain its class names #}
{% block content %}
	<div class="wrapper wrapper--padding-top">
		{# include breadcrumbs for deeply nested (grandchild) pages #}
		{% if page.get_ancestors|length > 4 %}
			{% include 'categories/breadcrumbs.html' %}
		{% endif %}

		<h1 class="about-us-title">
			{{ page.title }}
		</h1>
		<div class="about-us-content">
			{% comment %}
			the wrapper makes it so the text column isn't gigantic
			so we want to keep it _even if_ there's no main_image
			{% endcomment %}
			<div class="about-us-image-wrapper">
				{% if page.specific.main_image %}
                    {% image page.specific.main_image width-404 class="about-us-image" %}
				{% endif %}

				{% if page.specific.display_staff_card %}
					<div class="about-us-staff-card">
						{% with page.staff as person %}
							<div class="about-us-text">
								{% image person.main_image fill-150x150 %}

								<h2>{{ person.name }}</h2>

								<p>{{ person.position }}<br>{{ person.email }}{% if person.phone %} | {{ person.phone }}{% endif %}</p><br>
							</div>
						{% endwith %}
					</div>
				{% endif %}
			</div>

			<article class="about-us-text-wrapper">
                <div class="about-us-text">
					{% include_block page.body with service_page=True %}
				</div>
            </article>
		</div>
	</div>
{% endblock %}
